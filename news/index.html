<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • NMsim</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><script src="../extra.js"></script><meta property="og:title" content="Changelog"><meta name="google-site-verification" content="-8n-8OfzJii_lVruWfxXOhzUATKSgMdiSxMhOQoscu4"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">NMsim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/NMsim-intro.html">NMsim Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/NMsim-VPC.html">Simulations for VPCs</a></li>
    <li><a class="dropdown-item" href="../articles/NMsim-config.html">Requirements and Configuration</a></li>
    <li><a class="dropdown-item" href="../articles/NMsim-known.html">Simulate Known Subjects</a></li>
    <li><a class="dropdown-item" href="../articles/NMsim-ParamUncertain.html">Simulations with Parameter Uncertainty</a></li>
    <li><a class="dropdown-item" href="../articles/NMsim-forest.html">Simulation-based forest plots with NMsim</a></li>
    <li><a class="dropdown-item" href="../articles/NMsim-DataCreate.html">Data Set Creation with NMsim</a></li>
    <li><a class="dropdown-item" href="../articles/NMsim-ResidVar.html">Simulation with Residual Variability</a></li>
    <li><a class="dropdown-item" href="../articles/NMsim-varyPars.html">Simulate Models with Modifications</a></li>
    <li><a class="dropdown-item" href="../articles/NMsim-ReuseSimSubjects.html">Reuse Simulated Subjects</a></li>
    <li><a class="dropdown-item" href="../articles/NMsim-speed.html">Debugging, Speed, and Disk Space</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/NMsim-publications.html">Publications</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NMautoverse/NMsim/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NMautoverse/NMsim/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/NMautoverse/NMsim/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.3" id="nmsim-023">NMsim 0.2.3<a class="anchor" aria-label="anchor" href="#nmsim-023"></a></h2><p class="text-muted">CRAN release: 2025-05-20</p>
<div class="section level3">
<h3 id="new-features-0-2-3">New features<a class="anchor" aria-label="anchor" href="#new-features-0-2-3"></a></h3>
<ul><li><p><code><a href="../reference/NMaddSamples.html">NMaddSamples()</a></code> gains a <code>by</code> argument. This makes <code><a href="../reference/NMaddSamples.html">NMaddSamples()</a></code> easy to use for generation of both nominal sampling schemes and recreation of observed sampling schemes.</p></li>
<li><p>Streamlining of <code><a href="../reference/NMsim_VarCov.html">NMsim_VarCov()</a></code> and <code><a href="../reference/samplePars.html">samplePars()</a></code>. <code><a href="../reference/NMsim_VarCov.html">NMsim_VarCov()</a></code> now always calls <code><a href="../reference/samplePars.html">samplePars()</a></code> internally. <code><a href="../reference/samplePars.html">samplePars()</a></code> uses the <code>method</code> argument to switch between <code>mvrnorm</code>(multivariate normal distribution) and <code>simpar</code> (inverse Wishart distribution.</p></li>
<li><p><code><a href="../reference/NMsim_VarCov.html">NMsim_VarCov()</a></code> gains <code>method.sample</code> argument which is passed as <code>method</code> to <code><a href="../reference/samplePars.html">samplePars()</a></code>. This means <code><a href="../reference/NMsim_VarCov.html">NMsim_VarCov()</a></code> can be used to simulated with parameter uncertainty using either <code>mvrnorm</code> or <code>simpar</code>.</p></li>
</ul><p>Messages have been implemented in samplePars() to summarize number of truncations in case <code>mvrnorm</code> results in negative variance parameters.</p>
</div>
<div class="section level3">
<h3 id="bugfixes-0-2-3">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-2-3"></a></h3>
<p>NMsim_VarCov() sampling of OMEGA/SIGMA. Affects simulation with between-subject variability. Big thanks to Sanaya Shroff for reporting and fixing.</p>
</div>
<div class="section level3">
<h3 id="other-improvements-0-2-3">Other Improvements<a class="anchor" aria-label="anchor" href="#other-improvements-0-2-3"></a></h3>
<ul><li>Improved defaults for whether to suppress Nonmem messages (<code>nmquiet</code> argument). Particularly, when <code>NMsim</code> is not waiting on Nonmem runs, it will by default suppress those messages. Basically, NMsim will now by default only show Nonmem terminal messages if it is waiting, and only one Nonmem model is executed. Notice, that <code>quiet=TRUE</code> implies suppressing both <code>NMsim</code> and Nonmem messages and <code>nmquiet=TRUE</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-0-2-3">Other Changes<a class="anchor" aria-label="anchor" href="#other-changes-0-2-3"></a></h3>
<ul><li>The deprecated <code><a href="../reference/addEVID2.html">addEVID2()</a></code> is kept as a snapshot of when <code>NMsamples()</code> was introduced. The new <code>by</code> argument is not compatible with the default behavior of the deprecated <code><a href="../reference/addEVID2.html">addEVID2()</a></code>. This is to ensure reproducibility of existing code on the user side.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.2" id="nmsim-022">NMsim 0.2.2<a class="anchor" aria-label="anchor" href="#nmsim-022"></a></h2><p class="text-muted">CRAN release: 2025-05-06</p>
<div class="section level3">
<h3 id="new-features-0-2-2">New features<a class="anchor" aria-label="anchor" href="#new-features-0-2-2"></a></h3>
<ul><li>
<code><a href="../reference/sampleCovs.html">sampleCovs()</a></code> is a new function to conveniently sample subject-level covariates from an existing data set.</li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-2-2">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-2-2"></a></h3>
<ul><li><p>There was a bug introduced in version 0.2.1 leading <code><a href="../reference/NMsim.html">NMsim()</a></code> to throw an error saving some data sets. The issue is fixed.</p></li>
<li><p>The default Nonmem <code>$TABLE</code> format is insufficient with NMsim’s way to create row counters when simulating 1e5 rows or more. NMsim is now by default using a format with a much higher resolution. Thanks to Sanaya Shroff for helping debugging this.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.1" id="nmsim-021">NMsim 0.2.1<a class="anchor" aria-label="anchor" href="#nmsim-021"></a></h2><p class="text-muted">CRAN release: 2025-04-24</p>
<div class="section level3">
<h3 id="new-features-0-2-1">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-2-1"></a></h3>
<ul><li><p><code><a href="../reference/NMaddSamples.html">NMaddSamples()</a></code> replaces the <code><a href="../reference/addEVID2.html">addEVID2()</a></code> function. <code><a href="../reference/addEVID2.html">addEVID2()</a></code> will still work and redirects to <code><a href="../reference/NMaddSamples.html">NMaddSamples()</a></code> for backward compatibility. Your existing work will still work but you will get a (suppressable) message about the name change. Especially due to work on optimal sampling with <code>NMsim</code> by Ahmed Abulfathi and myself, we need a more flexible interface for adding samples.</p></li>
<li><p><code><a href="../reference/NMaddSamples.html">NMaddSamples()</a></code> comes with a new argument <code>DV</code>. By default <code><a href="../reference/NMaddSamples.html">NMaddSamples()</a></code> (used to be, <code><a href="../reference/addEVID2.html">addEVID2()</a></code>) adds rows without <code>DV</code> values and with <code>EVID=2</code> and <code>MDV=1</code>. If <code>DV</code> is supplied, <code><a href="../reference/NMaddSamples.html">NMaddSamples()</a></code> will include that value in the <code>DV</code> column and by default use <code>EVID=0</code> and <code>MDV=0</code>. An example where this is useful is when generating datasets for <code>$DESIGN</code> where <code>DV=0</code> is often used.</p></li>
<li><p><code><a href="../reference/samplePars.html">samplePars()</a></code> is a new function that replaces <code><a href="../reference/sampleParsSimpar.html">sampleParsSimpar()</a></code>. <code><a href="../reference/samplePars.html">samplePars()</a></code> takes the <code>method</code> argument which can be used to switch between multivariate normal distribution <code>method="mvrnorm"</code> and using the <code>simpar</code> package to get use Inverse-Wishart distribution for <code>$OMEGA</code> and <code>$SIGMA</code> parameters. Notice, both methods are fully automated in NMsim - all you need to write is the path to a control stream and the number (<code>nsims</code>) of parameter sets wanted.</p></li>
<li><p><code><a href="../reference/simPopEtas.html">simPopEtas()</a></code> by default does not overwrite an existing <code>.phi</code> file. <code><a href="../reference/simPopEtas.html">simPopEtas()</a></code> is used to generate sampled <code>ETA</code>s for use in future model simulations with the same synthetic population (<code>ETA</code>s). If the <code>.phi</code> file that stores the <code>ETA</code>s gets overwritten using a new seed, it will affect simulations using that <code>.phi</code> file. Overwriting the <code>.phi</code> file with different seeds should therefore be avoided, and this new behavior of protecting the generated <code>.phi</code> files reduces that risk.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-2-1">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-2-1"></a></h3>
<ul><li><p><code><a href="../reference/NMsim_VarCov.html">NMsim_VarCov()</a></code> would not include <code>$OMEGA</code> and <code>$SIGMA</code> blocks which lead to errors in Nonmem. This bug was likely introduced in NMsim 0.1.6 and has now been fixed.</p></li>
<li><p>Version 0.2.0 gave some warnings about non-existing columns. The warnings are benign and can be safely ignored. They are avoided in Version 0.2.1.</p></li>
<li><p>Updating initial values in models using <code>SAME</code> argument on random effects (e.g. in between-occasion variability) would fail if the effects were fixed. Resolved. Thanks to Sergio Iadevaia for reporting this.</p></li>
<li><p>Data sets with commas in character columns would make <code>NMsim</code> fail. Support for such data sets had not been carried over with the new data handling approach implemented in version 0.2.0. This has now been resolved.</p></li>
<li><p><code><a href="../reference/NMcreateDoses.html">NMcreateDoses()</a></code> had a bug in the <code>addl.lastonly</code> feature which would throw errors when <code>TIME</code> was longer than two. <code>addl.lastonly=TRUE</code> is default and means that if the length of the <code>ADDL</code> argument is one, it will be applied to the last dose only. This is for the common case where initial doses (say a load or an initial escalation phase) are followed by a maintenance regimen. The bug has been resolved.</p></li>
<li><p><code><a href="../reference/NMaddSamples.html">NMaddSamples()</a></code> would fail if using the <code>TAPD</code> argument when <code>TAPD</code> was already available as a column in data. Fixed.</p></li>
</ul></div>
<div class="section level3">
<h3 id="other-improvements-0-2-1">Other Improvements<a class="anchor" aria-label="anchor" href="#other-improvements-0-2-1"></a></h3>
<ul><li><p>The configuration of job submission is simplified when jobs are run in parallel with single-core processing.</p></li>
<li><p>Checks have been included in <code><a href="../reference/summarizeCovs.html">summarizeCovs()</a></code> for whether <code>NA</code>’s are produced. <code><a href="../reference/summarizeCovs.html">summarizeCovs()</a></code> is used to summarize simulated covariate effects (typically for forest plots). Especially, if for some reason the reference exposure is zero (likely an error by the modeler), <code><a href="../reference/summarizeCovs.html">summarizeCovs()</a></code> would throw an error. Now <code><a href="../reference/summarizeCovs.html">summarizeCovs()</a></code> will try to identify this, give useful messages back, and report the estimates.</p></li>
<li><p>Consistent ordering of columns in simulation results independently of <code>col.id</code> and <code>col.time</code>.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="nmsim-020">NMsim 0.2.0<a class="anchor" aria-label="anchor" href="#nmsim-020"></a></h2><p class="text-muted">CRAN release: 2025-03-13</p>
<div class="section level3">
<h3 id="new-features-0-2-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-2-0"></a></h3>
<ul><li>A greatly improved handling of data files has been implemented. This improves speed, reduced memory and disk usage, and adds features. It is fully backward compatible with the user interface of earlier versions.
<ul><li>Data sets are only saved once for each model.</li>
<li>Output tables are written and read more efficently. This is obtained by a combination of default <code>TABLE</code> options and an efficient method to read the tables if those options have not been changed by the user. If the user does change them, a more robust but slower and more memory intensive method is used.</li>
<li>Input and output data are now by default merged using a row identifier inserted by NMsim. This makes NMsim robust to Nonmem code that does not simulate all rows in input data.</li>
<li>Subproblems are automatically counted in the <code>NMREP</code> column in output. Force the inclusion of this column using the <code>nmrep</code> argument if needed even if not using <code>subproblems</code>.</li>
</ul></li>
<li>Variables from input data to be included in results can be specified using the new <code>carry.out</code> argument. The default behavior by <code><a href="../reference/NMsim.html">NMsim()</a></code> is to include all variables from input data on the result. However, if the data set contains many rows or columns, this can be memory demanding. Now you can minimize memory use and maximize speed by limiting the variables in both input and output. For example</li>
</ul><pre><code><span><span class="va">simres</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/NMsim.html">NMsim</a></span><span class="op">(</span><span class="va">file.mod</span>,<span class="va">data</span>,</span>
<span>                table.vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PRED"</span>,<span class="st">"IPRED"</span>,<span class="st">"Y"</span><span class="op">)</span>,</span>
<span>                carry.out<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ID"</span>,<span class="st">"TIME"</span>,<span class="va">`EVID`</span><span class="op">)</span></span>
<span>                <span class="op">)</span></span></code></pre>
<p><code>simres</code> will in this case contain only <code>PRED</code>, <code>IPRED</code>, and <code>Y</code> from the output table, and only <code>ID</code>, <code>TIME</code>, and <code>EVID</code> from the input <code>data.frame</code> (<code>data</code>). <code><a href="../reference/NMsim.html">NMsim()</a></code> also takes a new argument <code>table.format</code> which can be used to adjust the table format. But normally, that is not be necessary. There is no reason to list <code>ID</code> or any other column from the input data in <code>table.vars</code> since they can be carried over directly fro the input data, avoiding potential loss of accuracy in writing and reading to and from text files. You do not need to worry about merging input and output data correctly - <code><a href="../reference/NMsim.html">NMsim()</a></code> handles that internally using its own row identifier.</p>
<ul><li>Handling of Nonmem data filters. In case a sim is run without an simulation input data set, <code><a href="../reference/NMsim.html">NMsim()</a></code> by default reuses the estimation data set and the <code>IGNORE</code> and <code>ACCEPT</code> statements in the estimation control stream. This is very useful for visual predictive check (VPC) simulations. However, the aim may be to run the simulation on the same data set with differnt inclusions. A common example of the is if the estimation was run without samples below the quantification limit (M1), but the simulation also be performed on those samples. This can now be done by passing new filters to <code><a href="../reference/NMsim.html">NMsim()</a></code>. In fact, this can even be done by first reading the filters from the control stream, then easily editing them, before passing them to <code><a href="../reference/NMsim.html">NMsim()</a></code>.</li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-0-2-0">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-0-2-0"></a></h3>
<ul><li><p><code><a href="../reference/NMsim.html">NMsim()</a></code>’s argument <code>modify.model</code> has been renamed to <code>modify</code>. This is to align argument names with other arguments available for model modification, namely <code>inits</code>, <code>sizes</code>, and <code>filters</code>.</p></li>
<li><p><code><a href="../reference/NMcreateDoses.html">NMcreateDoses()</a></code> requires AMT to be provided.</p></li>
<li><p><code><a href="../reference/addEVID2.html">addEVID2()</a></code> only requires <code>CMT</code> argument when the column of the same name is present in <code>data</code>. Not all models require <code>CMT</code> and this change allows for building such data sets with <code><a href="../reference/NMcreateDoses.html">NMcreateDoses()</a></code> and <code><a href="../reference/addEVID2.html">addEVID2()</a></code>.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.6" id="nmsim-016">NMsim 0.1.6<a class="anchor" aria-label="anchor" href="#nmsim-016"></a></h2><p class="text-muted">CRAN release: 2025-02-05</p>
<ul><li><p>A major improvement is implemented on <code>NMSim_NWPRI()</code>, the simulation method that leverages the Nonmem <code>NWPRI</code> subroutine to simulate models with parameter uncertainty. This method was first included in NMsim 0.1.3 but - as was clearly declared in that version - it could only be trusted for simulation of <code>THETA</code>s. After further development in both <code>NMsim</code> and <code>NMdata</code> to support this as well as bugfixes in the new Nonmem 7.6.0, NMsim provides full support for simulation with parameter uncertainty using the inverse Wishart distribution through this simple interface.</p></li>
<li><p>A new arguments <code>inits</code> is introduced to manually specify parameter (initial) values. This is the values that go into <code>$THETA</code>, <code>$OMEGA</code> and <code>SIGMA</code> sections of the control stream. To simulate with the final estimated values (stored in a <code>.ext</code> file), simply add <code>inits=list("theta(1)"=list(init=1.2))</code>. For simulation, only the parameter values (init) may be of interest, but if you are using NMsim for estimation too, bounds and whether parameters are fixed can now also controlled. <code>BLOCK</code> structures in <code>$OMEGA</code> and <code>SIGMA</code> can currently not be changed (say, correlation of two random effects cannot be introduced or removed).</p></li>
<li><p>The <code>$SIZES</code> can now easily be controlled using the simple <code>sizes</code> argument in <code><a href="../reference/NMsim.html">NMsim()</a></code>. It leverages a new function <code><a href="../reference/NMupdateSizes.html">NMupdateSizes()</a></code> which can be used to edit <code>$SIZES</code> independently of the <code><a href="../reference/NMsim.html">NMsim()</a></code> function. In <code><a href="../reference/NMsim.html">NMsim()</a></code> just add the argument like <code>sizes=list(PD=100)</code> which will update or add <code>$SIZES PD=100</code> as needed. See documentation for more details.</p></li>
<li><p>Nonmem execution</p></li>
<li><p>Improved monitoring of Nonmem jobs. In NMsim 0.1.5, <code><a href="../reference/NMsim.html">NMsim()</a></code> would not always catch and properly handled failed runs. On Linux, this is much better handled now. On Windows, failures still may not be caught properly - more work to be don on Windows to align with the approach on Linux.</p></li>
<li><p>A new <code>post.fun</code> argument has been introduced in <code><a href="../reference/NMexec.html">NMexec()</a></code> to run additional code once Nonmem has finished. This can be used to automatically initiate creation of goodness of fit plots, simulations or any full workflows run using <code>Rscript</code> after estimation of models.</p></li>
</ul><div class="section level3">
<h3 id="bugfixes-0-1-6">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-1-6"></a></h3>
<ul><li><p><code><a href="../reference/overwrite.html">overwrite()</a></code> is a helper function intended to use in <code><a href="../reference/NMsim.html">NMsim()</a></code>’s <code>modify.model</code> argument. It would not work correctly for strings containing some special, at least. Fixed.</p></li>
<li><p><code>NMsim_NWPRI</code> would not always paste the full variance-covariance matrix for theta estimates into <code>$THETAPV</code> which would make NONMEM fail. Fixed.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.5" id="nmsim-015">NMsim 0.1.5<a class="anchor" aria-label="anchor" href="#nmsim-015"></a></h2><p class="text-muted">CRAN release: 2024-11-14</p>
<div class="section level3">
<h3 id="new-features-0-1-5">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-5"></a></h3>
<ul><li><p><code><a href="../reference/NMreadSim.html">NMreadSim()</a></code> has a new argument called <code>rm.tmp</code> which is used to remove the intermediate NONMEM files if they are successfully read. Remember, <code><a href="../reference/NMreadSim.html">NMreadSim()</a></code> creates a compressed results data set which will be read by <code><a href="../reference/NMreadSim.html">NMreadSim()</a></code> in future function calls, so unless debugging is needed on the simulation control streams and files returned by NONMEM running the simulations, it may be better to delete the intermediate files altogether and save the disk space.</p></li>
<li><p><code><a href="../reference/expandCovs.html">expandCovs()</a></code> has a new argument <code>reduce.ref</code> which defaults to <code>TRUE</code> meaning that by default there will be only one reference combination. If <code>FALSE</code> <code><a href="../reference/expandCovs.html">expandCovs()</a></code> will return one reference for each covariate. The forest plot can be evaluated with just one reference simulation.</p></li>
<li><p>New function <code><a href="../reference/summarizeCovs.html">summarizeCovs()</a></code> introduced to summarize simulation results for forest plots. This function is closely related to <code><a href="../reference/expandCovs.html">expandCovs()</a></code></p></li>
<li><p><code><a href="../reference/NMsim.html">NMsim()</a></code> no longer requires NONMEM to be available if <code>reuse.results=TRUE</code> and NONMEM does not need to be run.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-1-5">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-1-5"></a></h3>
<ul><li><p>NMsim 0.1.4 would not submit jobs to cluster when number of cores was <code>nc=1</code>. Fixed. Workaround in 0.1.4, use <code>nc=2</code>.</p></li>
<li><p>NMsim 0.1.4 erroneously concluded jobs had failed when sent to the cluster if there was no existing queue. This is due to the exit status of <code>qsub</code> in such cases. This has been fixed. As a workaround in 0.1.4, just run your sim again once the queue has been initiated by the first NMsim called.</p></li>
<li><p>When NONMEM failed in 0.1.4, NMsim might not return debugging info. Fixed.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.4" id="nmsim-014">NMsim 0.1.4<a class="anchor" aria-label="anchor" href="#nmsim-014"></a></h2><p class="text-muted">CRAN release: 2024-11-02</p>
<div class="section level3">
<h3 id="new-features-0-1-4">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-4"></a></h3>
<ul><li><p><code><a href="../reference/sampleParsSimpar.html">sampleParsSimpar()</a></code> is a new function that automates sampling of parameter values from an estimated variance-variance matrix in a successful <code>$COVARIANCE</code> step using the <code>simpar</code> R package from Metrum Research Group. <code>simpar</code> is currently not on CRAN, so the user must install it from MPN or github to make use of <code><a href="../reference/sampleParsSimpar.html">sampleParsSimpar()</a></code>. The sampled parameter values can be fed directly to <code>NMsim</code> using the <code>NMsim_VarCov</code> method making it very easy to simulate with parameter uncertainty based on <code>simpar</code>. I want to thank Sanaya Shroff for her outstanding work on this functionality and for her exciting work summarizing the available methods for simulation with parameter uncertainty which she will be sharing at ACoP 2024. Also a big thanks to Eric Anderson for helping out with adjusting the github workflows to pull <code>simpar</code> from MPN.</p></li>
<li><p><code><a href="../reference/expandCovs.html">expandCovs()</a></code> is a new function that puts together data sets for univariately varying covariates while keeping other at reference values. The function can derive both reference values and covariate values to simulate at by using i.e. <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code> and <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile()</a></code>.</p></li>
<li>
<p><code><a href="../reference/NMsim.html">NMsim()</a></code></p>
<ul><li>Results are now equipped with three columns distinguishing simulated models. This separation of information makes it easier to summarize simulation results within/across models and/or within/across simulation of models.
<ul><li>
<code>model</code>: The run name derived from <code>file.mod</code>.</li>
<li>
<code>name.sim</code>: The same as provided in the <code>name.sim</code> argument.</li>
<li>
<code>model.sim</code> The name of the generated model. In the simple case, this is <code>model</code> and <code>name.sim</code> combined. But in many cases, multiple models are being generated for each simulated control stream.</li>
</ul></li>
<li>No longer requires a <code>.ext</code> file if updating parameter values using PSN’s <code>update_inits</code>. It is still recommended to keep the <code>.ext</code> file since it provides higher accuracy than the <code>.lst</code> file.</li>
</ul></li>
<li>
<p><code><a href="../reference/NMexec.html">NMexec()</a></code></p>
<ul><li><p>When submitting all updated models, <code><a href="../reference/NMexec.html">NMexec()</a></code> will now by default try to detect if a model is already running before submitting it.</p></li>
<li><p>Provides a summary of models to be submitted before starting to do so.</p></li>
</ul></li>
<li>
<p><code><a href="../reference/NMcreateDoses.html">NMcreateDoses()</a></code></p>
<ul><li><p><code>ADDL</code> and <code>II</code> are now also separate arguments providing a simpler interface than the <code>addl</code> argument. The <code>addl</code> argument provides the advantage of being able to specify the two columns together in one <code>data.frame</code>, possibly including covariates.</p></li>
<li><p><code>add.lastonly</code> is a new argument. If <code>TRUE</code> (default) and <code>ADDL</code> and <code>II</code> are of length 1, they are only applied to the last event in a dosing regimen.</p></li>
<li><p><code>col.id</code> argument to specify name of subject id column or to omit altogether using <code>col.id=NA</code>.</p></li>
<li><p>Now checking that <code>TIME</code> is covering the length of all other arguments. In contrast to other arguments, it does not make much sense to try to extrapolate the <code>TIME</code> argument.</p></li>
</ul></li>
<li><p><code><a href="../reference/addEVID2.html">addEVID2()</a></code> now has two arguments, <code>TIME</code> and <code>TAPD</code> which allow for specification of time since first dose and time after each dose at which to insert simulation records. The two can even be combined. <code>TIME</code> replaces the now deprecated <code>time.sim</code> argument, and <code>TAPD</code> is new.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-1-4">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-1-4"></a></h3>
<ul><li><p>A bug most likely affecting most Windows users for execution of Nonmem has been fixed. If on Windows, you should upgrade to NMsim 0.1.4. Thank you to Boris Grinshpun for reporting this!</p></li>
<li><p>When using <code>method.execute="nmsim"</code> there was an issue with parallellization. This was not a major problem in most simulation applications, but it should now be fixed.</p></li>
<li>
<p><code><a href="../reference/NMsim.html">NMsim()</a></code></p>
<ul><li>When not providing a simulation data set - typically a simulation for a VPC - <code><a href="../reference/NMsim.html">NMsim()</a></code> would fail with messages like</li>
</ul></li>
</ul><pre><code>Error in `:=`((col.sim), ..name.sim) :
  Check that is.data.table(DT) == TRUE. Otherwise, := and `:=`(...) are defined for use in j, once only and in particular ways. See help(":=").</code></pre>
<p>The issue has been fixed. If using NMsim 0.1.3 or earlier, the workaround is to do <code>NMdataConf(as.fun="data.table")</code>. Then after having the simulation results as a data.table, convert it with <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> or as preferred.</p>
<p>Notice, <code><a href="https://nmautoverse.github.io/NMdata/reference/NMdataConf.html" class="external-link">NMdataConf()</a></code> affects the succeeding <code><a href="../reference/NMsim.html">NMsim()</a></code> calls but also other NMdata and NMsim function calls. When the VPC simulation has run, you may not want to continue recieving data.tables, you should reset the default value for as.fun: <code>NMdataConf(as.fun=NULL)</code> which will turn it back to returning data.frames by default. If you prefer tibbles, you can do <code>NMdataConf(as.fun=tibble::as_tibble)</code>. Generally, if you prefer to work with something that is not data.frames (data.table and tibble the most common alternatives), it is recommended to use <code><a href="https://nmautoverse.github.io/NMdata/reference/NMdataConf.html" class="external-link">NMdataConf()</a></code> to customize your default.</p>
<ul><li>
<code><a href="../reference/NMexec.html">NMexec()</a></code>
<ul><li>
<code>NMexec</code> would fail running control streams named starting in numerals (like <code>1.mod</code>) when <code>sge=TRUE</code>. This is due to the way <code>sge</code> job names are generated by <code><a href="../reference/NMexec.html">NMexec()</a></code>. Fixed by prepending “NMsim_” in these cases.</li>
</ul></li>
<li>
<code>NMcreateDoses</code>
<ul><li>Would in some cases create too many replicates if there were covariates on multiple arguments. Fixed.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.3" id="nmsim-013">NMsim 0.1.3<a class="anchor" aria-label="anchor" href="#nmsim-013"></a></h2><p class="text-muted">CRAN release: 2024-08-26</p>
<div class="section level3">
<h3 id="new-features-0-1-3">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-3"></a></h3>
<ul><li>
<p><code><a href="../reference/NMsim.html">NMsim()</a></code></p>
<ul><li><p>New simulation method <code><a href="../reference/NMsim_NWPRI.html">NMsim_NWPRI()</a></code> to simulate with parameter uncertainty. This automates simulation with parameter uncertainty using Nonmem’s <code>NWPRI</code> subroutine for models with a successful covariance step. For now this method only works for <code>THETA</code> since we have found that the parameter distributions sampled for <code>OMEGA</code> and <code>SIGMA</code> do not always match the model estimates and therefore cannot be trusted. To ensure that only <code>THETA</code> are sampled and simulated, this method should only be run using the <code>typical=TRUE</code> argument. This method is much faster than the existing methods in NMsim for simulation with parameter uncertainty (<code><a href="../reference/NMsim_VarCov.html">NMsim_VarCov()</a></code>). This method depends on <code>NMdata</code> version 0.1.7 or greater. Big thanks to Brian Reilly for his excellent work on this important contribution.</p></li>
<li><p>The <code><a href="../reference/add.html">add()</a></code> function to be used in <code><a href="../reference/NMsim.html">NMsim()</a></code>’s <code>modify.model</code> argument now supports prepending and appending of text lines to control stream sections. The default is still to append and <code>add("text",.pos="top")</code> will now prepend “text”.</p></li>
</ul></li>
<li>
<p><code><a href="../reference/NMexec.html">NMexec()</a></code></p>
<ul><li><p>A “cleaning” feature has been added to <code><a href="../reference/NMexec.html">NMexec()</a></code>, removing some of the temporary files generated by Nonmem after ended execution. The interface is inspired by PSN’s <code>clean</code> argument supporting values 0 (no cleaning), 1-4 (quite some cleaning - so far no difference betwen these values), and 5 for complete deletion of the temporary directory. When using <code>method.execute="PSN"</code> NMsim calls PSN’s execute passing on the <code>clean</code> value.</p></li>
<li><p>Default number of cores to be used by <code><a href="../reference/NMexec.html">NMexec()</a></code> can be controlled using <code>NMdataConf(nc=N)</code> where <code>N</code> is the desired default. Notice, <code><a href="../reference/NMsim.html">NMsim()</a></code> will not use this default. This is because parallellization is not as commonly used in simulation as in estimation.</p></li>
<li><p>A useful backup feature has been added. Before execution, any existing results files related to a model are by default moved to a backup folder. The backup files are not</p></li>
</ul></li>
<li><p><code><a href="../reference/NMsimTestConf.html">NMsimTestConf()</a></code> - Function to summarize and test configuration. This is used internally and provides important debugging information.</p></li>
<li><p><code><a href="../reference/readParsWide.html">readParsWide()</a></code> - A function to read wide-format parameter tables - is now exported. This is useful when simulating with parameter values that have been sampled outside Nonmem, e.g. using the <code>simpar</code> package.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-1-3">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-1-3"></a></h3>
<ul><li><p><code><a href="../reference/NMexec.html">NMexec()</a></code> would fail on linux when run on models with multiple <code>$TABLE</code> statements. Fixed.</p></li>
<li><p><code>NMsim</code>’s internal method to update parameter initial values had an issue running on models with <code>$OMEGA</code> block structures. Fixed.</p></li>
<li><p><code><a href="../reference/NMreadSim.html">NMreadSim()</a></code> would fail if working directory had been changed. Fixed.</p></li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-0-1-3">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-0-1-3"></a></h3>
<ul><li>addEVID2 will no longer add a DV=NA column if DV is not in the input data set.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.2" id="nmsim-012">NMsim 0.1.2<a class="anchor" aria-label="anchor" href="#nmsim-012"></a></h2><p class="text-muted">CRAN release: 2024-07-15</p>
<p>No changes since 0.1.1 except for disabling a test that was failing on some systems due to technical reasons.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="nmsim-011">NMsim 0.1.1<a class="anchor" aria-label="anchor" href="#nmsim-011"></a></h2><p class="text-muted">CRAN release: 2024-07-03</p>
<p>While no critical and generally only few bugs have been found in NMsim 0.1.0, NMsim 0.2.0 includes several improvements and upgrades. The interface feels smoother too. I want to thank Ron Keizer for feedback and advice.</p>
<div class="section level3">
<h3 id="new-features-0-1-1">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-1"></a></h3>
<ul><li><p><code><a href="../reference/NMsim.html">NMsim()</a></code> has a much reduced and improved messaging to the user. If more than one model or data set is supplied or generated, progress trackers will be shown while starting Nonmem, while waiting for Nonmem to finish, and while collecting the simulation results.</p></li>
<li><p>The messages include information about where intermediate files and final results files are stored.</p></li>
<li><p><code><a href="../reference/NMexec.html">NMexec()</a></code> has improved support for estimation. <code>method.execute="nmsim"</code> and <code>method.execute="psn"</code> both work on linux and windows, even though less thoroughly tested on windows. Thank you to Boris Grinshpun for testing.</p></li>
<li><p>Names of files containing final results from <code><a href="../reference/NMsim.html">NMsim()</a></code> have been renamed to be more intuitive. The previous <code>_paths.rds</code> will now be called <code>_MetaData.rds</code>. The results, once read and compressed, will be in a file called <code>_ResultsData.fst</code>. Notice, both these files are required to fully recover simulation results. Thanks to Brian Reilly for discussions on this and many other design aspects.</p></li>
<li><p>It is now possible to provide specific parameters (<code>THETA</code>, <code>OMEGA</code> and <code>SIGMA</code>) for Nonmem simulation. <code><a href="../reference/NMsim.html">NMsim()</a></code> table for simulations. See argument <code>file.ext</code> and <code>NMsim_VarCov</code>’s argument <code>ext</code>.</p></li>
<li><p>New arguments to control seeds. <code>NMsim</code> can either use R’s <code>set.seed</code> before generating the seeds for Nonmem. Detailed control of the seeds, including how many to include and the distribution of the random sources in Nonmem, can be controlled using the <code>seed.nm</code> argument. This way, the user can add random processes to the estimated control stream. The actual Nonmem seed values can also be provided.</p></li>
<li><p><code>method.sim=NMsim_typical()</code> has been replaced by argument <code>typical=TRUE</code>. This means typical subject simulations can now be combined with other simulations methods like <code>NMsim_VarCov</code>.</p></li>
<li><p><code><a href="../reference/NMsim.html">NMsim()</a></code> now adds a column called <code>sim</code> which carries the name of the simulation defined by the <code>name.sim</code> argument.</p></li>
<li><p>Several checks for existence and consistency of files are implemented.</p></li>
<li><p>The native Nonmem execution method now also works for estimation.</p></li>
<li><p><code>pnm</code> files are now saved with the model for transparency.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-1-1">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-1-1"></a></h3>
<ul><li><p>Running <code>rbind</code> on results from <code>NMsim</code> would throw errors. Thanks to Simone Cassani for reporting this. Fixed.</p></li>
<li><p>Using other file name extensions than <code>.mod</code> on input control streams in combination with <code>NMdataConf(file.mod)</code> would make NMsim fail. Thanks to Brian Reilly for reporting. Fixed.</p></li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-0-1-1">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-0-1-1"></a></h3>
<ul><li><p><code><a href="../reference/NMsim_known.html">NMsim_known()</a></code> renamed to <code><a href="../reference/NMsim_EBE.html">NMsim_EBE()</a></code>.</p></li>
<li><p>Generated control streams have been stripped off of the “NMsim_” prefix. These files are located in <code>NMsim</code> generated folders so the prefix was uninformative.</p></li>
<li><p>In case of multi-threaded (cluster) execution and something went wrong <code><a href="../reference/NMexec.html">NMexec()</a></code> used to write some output files from Nonmem in the current working directory. All these are now being written to the model execution directory for clarity and tidyness.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="nmsim-010">NMsim 0.1.0<a class="anchor" aria-label="anchor" href="#nmsim-010"></a></h2><p class="text-muted">CRAN release: 2024-02-22</p>
<p>For the first time NMsim works on Windows. There may still be some limitations but initial testing looks very promising. Make sure to set <code>path.nonmem</code>. See the configuration vignette on the website: <a href="https://nmautoverse.github.io/NMsim/articles/NMsim-config.html" class="external-link"><code>NMsim-config.html</code></a></p>
<p>0.1.0 is also an important upgrade that solidifies the way NMsim reads results from simulations. In addition to important bug fixes, it allows for NMsim to wait on Nonmem to complete simulations - even when they are run on a cluster. This means even large simulations with NMsim can be integrated in scripts.</p>
<div class="section level3">
<h3 id="new-features-0-1-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-0"></a></h3>
<ul><li><p>Works on Windows - at least most features do.</p></li>
<li><p><code><a href="../reference/NMsim.html">NMsim()</a></code> and <code><a href="../reference/NMreadSim.html">NMreadSim()</a></code> now have <code>wait</code> arguments which controls if they will wait for Nonmem to finish simulating. This will also work if jobs were sent to the cluster.</p></li>
<li><p><code><a href="../reference/NMsim.html">NMsim()</a></code> respects the <code>reuse.results</code> argument. If <code>TRUE</code> it will use results file on the file system. This can be used in stead of putting <code><a href="../reference/NMsim.html">NMsim()</a></code> calls inside an if-statement to disable the simulation but read results on file.</p></li>
<li><p><code><a href="../reference/NMsim.html">NMsim()</a></code> looks for a couple of features of the provided control streams that are known to be able to cause issues. Warnings will be issued if these are found.</p></li>
<li><p><code>addEVID2</code> has a new argument, <code>EVID</code> to specify what value the <code>EVID</code> column should have. It can be useful sometimes to use <code>EVID=0</code> for simulation records.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-1-0">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-1-0"></a></h3>
<ul><li>In some cases <code><a href="../reference/NMreadSim.html">NMreadSim()</a></code> would not get the path right to the simulation results leading to failures in reading simulation results. Fixed.</li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-0-1-0">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-0-1-0"></a></h3>
<ul><li>Functions <code>NMreadExt</code> and <code>NMreadPhi</code> have been removed from NMsim. They live and are being maintained in the <code>NMdata</code> package. In NMsim, were deprecated and unmaintained functions.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.10" id="nmsim-0010">NMsim 0.0.10<a class="anchor" aria-label="anchor" href="#nmsim-0010"></a></h2><p class="text-muted">CRAN release: 2024-02-08</p>
<p>NMsim 0.0.9 had an unfortunate bug in <code><a href="../reference/NMreadSim.html">NMreadSim()</a></code> which has been fixed. That bugfix is difference between 0.0.9 and 0.0.10.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.9" id="nmsim-009">NMsim 0.0.9<a class="anchor" aria-label="anchor" href="#nmsim-009"></a></h2><p class="text-muted">CRAN release: 2024-02-07</p>
<p>NMsim 0.0.9 is almost identical to 0.0.8 but ensures compatibility with older R versions.</p>
<div class="section level3">
<h3 id="bugfixes-0-0-9">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-0-9"></a></h3>
<ul><li>In some cases <code>NMreadSim</code> would not be able to read and combine results from models that returned different data variables. Fixed.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.8" id="nmsim-008">NMsim 0.0.8<a class="anchor" aria-label="anchor" href="#nmsim-008"></a></h2><p class="text-muted">CRAN release: 2024-02-07</p>
<div class="section level3">
<h3 id="new-features-0-0-8">New features<a class="anchor" aria-label="anchor" href="#new-features-0-0-8"></a></h3>
<ul><li><p><code>NMsim</code> 0.0.1 would generate an <code>rds</code> file with paths to simulation files and results for each model+data set simulated. This has been changed to now only generate one table per model. This makes it simpler to read simulation results in some cases.</p></li>
<li><p><code>NMreadSim</code> should now be the best and only way for the user to read <code>NMsim</code> simulation results. It interprets <code>rds</code> files (which are the ones intended for reading), <code>fst</code> files, tables of <code>NMsim</code> runs, and <code>NMsim</code> results. This makes it less confusing what can be processed by <code>NMreadSim</code> and also it sometimes easier to generalize code reading simulation results. Also, <code>NMsim</code> now always reads results using <code>NMreadSim</code>. This has the advantage that an fst file will always be produced if <code>NMsim</code> waits to read the results.</p></li>
<li><p><code>NMreadSim</code> has a new argument, <code>check.time</code> by default disabling checking whether a collected <code>fst</code> file is newer than the results files generated by <code>NMsim</code>. Normally, it’s a good thing to check this but some ways of sharing file files may not retain file modification times needed to check for this. <code>NMsim</code> will delete the <code>fst</code> files if it finds any so normally it should not be a problem to skip this check.</p></li>
<li><p><code>modify.model</code> is the argument to use to modify the control stream after <code>NMsim</code> is done preparing the simulation. A couple of helper functions are available making it really easy to add contents (very commonly used) or modify contents.</p></li>
<li><p><code>NMsim</code> now tries to reuse stored results if <code>reuse.results=TRUE</code>. It does so in a simple way - if they exist, they will be attempted read - so be careful to rerun simulations without this option if you change any arguments.</p></li>
<li><p><code>NMsim</code> will by default add a <code>DV</code> column with <code>NA</code> values if <code>DV</code> is not in input data. Nonmem most often needs that column, and it is uninformative for simulations. Disable this feature by using <code>auto.dv=FALSE</code>.</p></li>
<li><p>The <code>transform</code> option has been integrated into the table of simulations created by <code><a href="../reference/NMsim.html">NMsim()</a></code>. This means even if the results are not read by <code>NMsim</code> (because the simulation is not executed or it is submitted to a cluster), the transformation will still be applied by <code><a href="../reference/NMreadSim.html">NMreadSim()</a></code> later.</p></li>
<li><p><code>NMsim()'s</code> <code>dir.sims</code> and <code>dir.res</code> arguments can be controlled using <code><a href="https://nmautoverse.github.io/NMdata/reference/NMdataConf.html" class="external-link">NMdata::NMdataConf()</a></code>. Often these two arguments are used all the time, so it’s convenient to be able to configure those once and for all in a script.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-0-8">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-0-8"></a></h3>
<ul><li><p><code>NMreadSim</code> was only able to read results if the current working directory was the same as when <code>NMsim</code> was executed. Now fixed.</p></li>
<li><p>In some cases <code>NMsim</code> would fail on models with multiple output tables when the <code>table.vars</code> argument was not used. Fixed.</p></li>
<li><p><code>NMsim</code>’s <code>sim.dir.from.scratch</code> argument was not respected due to a simple bug, leading to <code>dir.sims</code> growing each time a simulation was rerun.</p></li>
<li><p>In case simulation data is a list of data sets <code>NMsim</code> would not order columns when <code>order.columns</code> was <code>TRUE</code>. Now fixed.</p></li>
<li><p>In case of lists of data sets, and the list element (data set) names included spaces, <code><a href="../reference/NMsim.html">NMsim()</a></code> would throw and error. Spaces in data set names are now replaced with under scores (“_“) to avoid that. It will often happen when data sets are split into lists using <code><a href="https://rdatatable.gitlab.io/data.table/reference/split.html" class="external-link">data.table::split.data.table()</a></code> - which is an excellent way to do this, by the way.</p></li>
<li><p>Function <code><a href="../reference/simPopEtas.html">simPopEtas()</a></code> was not exported, so only available as <code>NMsim:::simPopEtas()</code>. Fixed.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.7" id="nmsim-007">NMsim 0.0.7<a class="anchor" aria-label="anchor" href="#nmsim-007"></a></h2><p class="text-muted">CRAN release: 2024-01-08</p>
<div class="section level3">
<h3 id="new-features-0-0-7">New features<a class="anchor" aria-label="anchor" href="#new-features-0-0-7"></a></h3>
<ul><li><p>Function <code><a href="../reference/simPopEtas.html">simPopEtas()</a></code> to generate a population from a model. The population can be saved as a <code>phi</code> file to be reused in subsequent simulations. The function is by mistake not exported in 0.0.7 so for now you must use <code>NMsim:::simPopEtas()</code> to use it.</p></li>
<li><p>Function <code><a href="../reference/NMreadSim.html">NMreadSim()</a></code> provides a very simple interface to reading simulation results. Especailly in cases where the simulation is being parallelized or otherwise spawns multiple Nonmem jobs, this is a useful feature.</p></li>
<li><p>A list of simulation data sets will now be simulated with separate Nonmem runs. This is an efficient way to parellelize large simulation runs.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.6" id="nmsim-006">NMsim 0.0.6<a class="anchor" aria-label="anchor" href="#nmsim-006"></a></h2><p class="text-muted">CRAN release: 2023-11-28</p>
<div class="section level3">
<h3 id="new-features-0-0-6">New features<a class="anchor" aria-label="anchor" href="#new-features-0-0-6"></a></h3>
<ul><li>Support for parallelization of simulations added when using PSN. It used to be possible to run multiple simulations simultaneously in separate threads. Now single simulation runs can be parallelized on <code>sge</code> type clusters (using <code>qsub</code>). See arguments <code>sge</code> and <code>nc</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-0-0-6">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-0-0-6"></a></h3>
<ul><li>A simple mistake would create problems in <code><a href="../reference/genPhiFile.html">genPhiFile()</a></code> when having more than 10 ETAs in a model. Now fixed.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.5" id="nmsim-005">NMsim 0.0.5<a class="anchor" aria-label="anchor" href="#nmsim-005"></a></h2><p class="text-muted">CRAN release: 2023-11-11</p>
<div class="section level3">
<h3 id="new-features-0-0-5">New features<a class="anchor" aria-label="anchor" href="#new-features-0-0-5"></a></h3>
<ul><li><p>Full support for models estimated with SAEM. Especially, simulation of “known” subjects, i.e. re-using emperical Bayes estimates, is slightly different with these models.</p></li>
<li><p>Experimental support for windows with PsN. <code>dir.psn</code> argument has to point to a directory where executables <code>execute</code> and <code>update_inits</code> are found. Thanks to Sjoerd Koopman for debugging and testing this. Hopefully in future versions, <code>PsN</code> will not be needed on Windows (like it is not needed on Linux).</p></li>
<li><p>The simulation method called NMsim_known now accepts other <code>.phi</code> files to use than the .phi file generated by the estimation run. This is useful if one wants to reuse subjects generated in a previous simulation.</p></li>
</ul></div>
<div class="section level3">
<h3 id="otherminor-improvements-0-0-5">Other/minor improvements<a class="anchor" aria-label="anchor" href="#otherminor-improvements-0-0-5"></a></h3>
<ul><li>NMexec now also copies out the shk (shrinkage estimates) file after a run. The files that will by default be copied and reported next to the control streams are now <code>xml</code>, <code>ext</code>, <code>cov</code>, <code>cor</code>, <code>coi</code>, <code>phi</code>, <code>shk</code> - in addition to output table files and the archived input data of course.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.2" id="nmsim-002">NMsim 0.0.2<a class="anchor" aria-label="anchor" href="#nmsim-002"></a></h2><p class="text-muted">CRAN release: 2023-09-14</p>
<div class="section level3">
<h3 id="new-features-0-0-2">New features<a class="anchor" aria-label="anchor" href="#new-features-0-0-2"></a></h3>
<ul><li><p>NMsim supports <code>type.sim="typical"</code> which means all OMEGAS will be fixed to zero. This requires the ext file to be present.</p></li>
<li><p>Experimental support for simulation of estimated subjects using <code>type.sim="known"</code>.</p></li>
</ul></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Philip Delff.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>



  <script data-goatcounter="https://nmsim.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script></body></html>

